import{_ as x,u as $,r as _,o as y,c as f,a as t,w as n,v as u,b as I,l as B,p as U,e as D,m as M,n as F,f as N,g as V,F as k,h as j,q as A,t as C}from"./index-tl9aye4V.js";import{P as z}from"./Pagination-Djo1SYsp.js";const v=l=>(U("data-v-2171772a"),l=l(),D(),l),q={key:0,class:"overlay"},E={class:"dialog-box"},L=v(()=>t("h2",null,"添加新数据库",-1)),R={class:"input-group"},T=v(()=>t("label",{for:"type"},"数据库类型",-1)),G={class:"input-group"},H=v(()=>t("label",{for:"name"},"数据库名称",-1)),J={class:"input-group"},K=v(()=>t("label",{for:"host"},"数据库地址",-1)),O={class:"input-group"},Q=v(()=>t("label",{for:"port"},"端口",-1)),W={class:"input-group"},X=v(()=>t("label",{for:"user"},"用户",-1)),Y={class:"input-group"},Z=v(()=>t("label",{for:"paswd"},"密码",-1)),tt={__name:"AddDataSource",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(l){const p=$(l,"modelValue"),e=_({db_type:null,db_name:null,db_password:null,db_host:null,db_port:null,db_user:null}),i=()=>{p.value=!1},b=async()=>{await B(e.value),i(),window.location.reload()};return(g,s)=>p.value?(y(),f("div",q,[t("div",E,[t("button",{class:"close-button",onClick:i},"×"),L,t("div",R,[T,n(t("input",{type:"text",id:"type","onUpdate:modelValue":s[0]||(s[0]=o=>e.value.db_type=o)},null,512),[[u,e.value.db_type]])]),t("div",G,[H,n(t("input",{type:"text",id:"name","onUpdate:modelValue":s[1]||(s[1]=o=>e.value.db_name=o)},null,512),[[u,e.value.db_name]])]),t("div",J,[K,n(t("input",{type:"text",id:"host","onUpdate:modelValue":s[2]||(s[2]=o=>e.value.db_host=o)},null,512),[[u,e.value.db_host]])]),t("div",O,[Q,n(t("input",{type:"text",id:"port","onUpdate:modelValue":s[3]||(s[3]=o=>e.value.db_port=o)},null,512),[[u,e.value.db_port]])]),t("div",W,[X,n(t("input",{type:"text",id:"user","onUpdate:modelValue":s[4]||(s[4]=o=>e.value.db_user=o)},null,512),[[u,e.value.db_user]])]),t("div",Y,[Z,n(t("input",{type:"password",id:"paswd","onUpdate:modelValue":s[5]||(s[5]=o=>e.value.db_password=o)},null,512),[[u,e.value.db_password]])]),t("div",{class:"dialog-buttons"},[t("button",{type:"button",class:"cancel-button",onClick:i}," Cancel "),t("button",{type:"submit",class:"submit-button",onClick:b}," Submit ")])])])):I("",!0)}},et=x(tt,[["__scopeId","data-v-2171772a"]]),m=l=>(U("data-v-8d2a1c2d"),l=l(),D(),l),ot={key:0,class:"overlay"},st={class:"dialog-box"},lt=m(()=>t("h2",null,"更新数据库",-1)),at={class:"input-group"},dt=m(()=>t("label",{for:"type"},"数据库类型",-1)),nt={class:"input-group"},ut=m(()=>t("label",{for:"name"},"数据库名称",-1)),it={class:"input-group"},pt=m(()=>t("label",{for:"host"},"数据库地址",-1)),rt={class:"input-group"},ct=m(()=>t("label",{for:"port"},"端口",-1)),_t={class:"input-group"},vt=m(()=>t("label",{for:"user"},"用户",-1)),mt={class:"input-group"},bt=m(()=>t("label",{for:"paswd"},"密码",-1)),gt={__name:"UpdateSourceDialog",props:{modelValue:{},modelModifiers:{},form:{},formModifiers:{}},emits:["update:modelValue","update:form"],setup(l){const p=$(l,"modelValue"),e=$(l,"form"),i=()=>{p.value=!1},b=async()=>{await M(e.value.db_id,e.value),i(),window.location.reload()},g=async()=>{await F(e.value.db_id),window.location.reload()};return(s,o)=>p.value?(y(),f("div",ot,[t("div",st,[t("button",{class:"close-button",onClick:i},"×"),lt,t("div",at,[dt,n(t("input",{type:"text",id:"type","onUpdate:modelValue":o[0]||(o[0]=a=>e.value.db_type=a)},null,512),[[u,e.value.db_type]])]),t("div",nt,[ut,n(t("input",{type:"text",id:"name","onUpdate:modelValue":o[1]||(o[1]=a=>e.value.db_name=a)},null,512),[[u,e.value.db_name]])]),t("div",it,[pt,n(t("input",{type:"text",id:"host","onUpdate:modelValue":o[2]||(o[2]=a=>e.value.db_host=a)},null,512),[[u,e.value.db_host]])]),t("div",rt,[ct,n(t("input",{type:"text",id:"port","onUpdate:modelValue":o[3]||(o[3]=a=>e.value.db_port=a)},null,512),[[u,e.value.db_port]])]),t("div",_t,[vt,n(t("input",{type:"text",id:"user","onUpdate:modelValue":o[4]||(o[4]=a=>e.value.db_user=a)},null,512),[[u,e.value.db_user]])]),t("div",mt,[bt,n(t("input",{type:"password",id:"paswd","onUpdate:modelValue":o[5]||(o[5]=a=>e.value.db_password=a)},null,512),[[u,e.value.db_password]])]),t("div",{class:"dialog-buttons"},[t("button",{type:"button",class:"cancel-button",onClick:i}," Cancel "),t("button",{type:"button",class:"del-button",onClick:g}," Delete "),t("button",{type:"submit",class:"submit-button",onClick:b}," Submit ")])])])):I("",!0)}},yt=x(gt,[["__scopeId","data-v-8d2a1c2d"]]),S=l=>(U("data-v-5c84423c"),l=l(),D(),l),ft={class:"data-com"},ht={class:"main-content"},wt=S(()=>t("h1",null,"数据库",-1)),Vt={style:{width:"680px",height:"480px",overflow:"hidden"}},$t={class:"projects"},xt=["onClick"],Ut=S(()=>t("div",{style:{"font-size":"12px",color:"gray"}},"数据库名称",-1)),Dt=S(()=>t("div",{style:{"font-size":"12px",color:"gray"}},"主机地址",-1)),St={__name:"datasource",setup(l){N();const p=_(!1),e=()=>{p.value=!0},i=_([]),b=_(100),g=_(8),s=_(1),o=async()=>{const r=await A(s.value,g.value);i.value=r.data.data.records,b.value=r.data.data.total};o();const a=r=>{console.log("当前页:",r),s.value=r,o()},h=_({}),w=_(!1),P=r=>{h.value=r,w.value=!0};return(r,c)=>(y(),f(k,null,[V(et,{modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=d=>p.value=d)},null,8,["modelValue"]),V(yt,{modelValue:w.value,"onUpdate:modelValue":c[1]||(c[1]=d=>w.value=d),form:h.value,"onUpdate:form":c[2]||(c[2]=d=>h.value=d)},null,8,["modelValue","form"]),t("div",ft,[t("main",ht,[t("header",{class:"main-header"},[wt,t("button",{onClick:e},"+ 新建数据库")]),t("div",Vt,[t("div",$t,[(y(!0),f(k,null,j(i.value,d=>(y(),f("div",{key:d.db_id,class:"project",onClick:kt=>P(d)},[Ut,t("div",null,C(d.db_name),1),Dt,t("div",null,C(d.db_host),1)],8,xt))),128))])])]),V(z,{class:"pagination","total-items":b.value,"items-per-page":g.value,"current-page":s.value,"onUpdate:currentPage":c[3]||(c[3]=d=>s.value=d),"onUpdate:modelValue":a},null,8,["total-items","items-per-page","current-page"])])],64))}},Pt=x(St,[["__scopeId","data-v-5c84423c"]]);export{Pt as default};
