import{_ as S,u as D,o as n,c as p,a as t,w as l,v,b as x,C as R,p as q,e as C,D as B,r as h,E as $,G as g,F as k,h as I,t as U,H as F,I as G,J,g as w,j as T,K as z,k as A,L as H,M,N as K,O as Q}from"./index-DyMfYp_t.js";import{g as P}from"./base64-BbY-I90a.js";const E=a=>(q("data-v-f1c833b0"),a=a(),C(),a),W={key:0,class:"overlay"},X={class:"dialog-box"},Y=E(()=>t("h2",null,"修改",-1)),Z={class:"input-group"},tt=E(()=>t("label",{for:"name"},"项目名称",-1)),et={class:"input-group"},st=E(()=>t("label",{for:"iden"},"项目标识串",-1)),ot={__name:"UpdateProjectDialog",props:{show:{},showModifiers:{},form:{},formModifiers:{}},emits:["update:show","update:form"],setup(a){const m=D(a,"show"),_=D(a,"form"),r=()=>{m.value=!1},f=async()=>{console.log(_.value),await R(_.value),r()};return(j,d)=>m.value?(n(),p("div",W,[t("div",X,[t("button",{class:"close-button",onClick:r},"×"),Y,t("div",Z,[tt,l(t("input",{type:"text",id:"name","onUpdate:modelValue":d[0]||(d[0]=c=>_.value.project_name=c)},null,512),[[v,_.value.project_name]])]),t("div",et,[st,l(t("input",{type:"text",id:"iden","onUpdate:modelValue":d[1]||(d[1]=c=>_.value.project_identifier=c)},null,512),[[v,_.value.project_identifier]])]),t("div",{class:"dialog-buttons"},[t("button",{type:"button",class:"cancel-button",onClick:r}," Cancel "),t("button",{type:"submit",class:"submit-button",onClick:f}," Submit ")])])])):x("",!0)}},it=S(ot,[["__scopeId","data-v-f1c833b0"]]),i=a=>(q("data-v-2d8b6833"),a=a(),C(),a),at={key:0,class:"overlay"},lt={style:{width:"700px",height:"80vh",overflow:"hidden"}},_t={class:"dialog-box"},ut=i(()=>t("h2",null,"新增接口",-1)),nt={class:"input-group"},pt=i(()=>t("label",{for:"api_uri"},"链接",-1)),dt={class:"input-group"},rt=i(()=>t("label",{for:"api_method"},"方法",-1)),ct=i(()=>t("option",{value:"GET"},"GET",-1)),vt=i(()=>t("option",{value:"POST"},"POST",-1)),ht=i(()=>t("option",{value:"PUT"},"PUT",-1)),mt=i(()=>t("option",{value:"DELETE"},"DELETE",-1)),bt=[ct,vt,ht,mt],ft={class:"input-group"},yt=i(()=>t("label",{for:"api_method"},"名称",-1)),gt={class:"input-group"},wt=i(()=>t("label",{for:"api_on"},"启用",-1)),xt={class:"switch"},Vt=i(()=>t("span",{class:"slider"},null,-1)),kt={class:"input-group"},Ut=i(()=>t("label",{for:"api_is_use_auth"},"启用鉴权",-1)),jt={class:"switch"},$t=i(()=>t("span",{class:"slider"},null,-1)),Pt={key:0,class:"input-group"},Dt=i(()=>t("label",{for:"api_auth_id"},"鉴权组",-1)),It=["value"],St={class:"input-group"},qt=i(()=>t("label",{for:"api_query"},"query参数",-1)),Ct={class:"input-group"},Et=i(()=>t("label",{for:"api_is_use_body"},"启用body参数",-1)),Lt={class:"switch"},Tt=i(()=>t("span",{class:"slider"},null,-1)),At={class:"input-group"},Mt=i(()=>t("label",{for:"api_is_use_script"},"启用前置脚本",-1)),Bt={class:"switch"},Ot=i(()=>t("span",{class:"slider"},null,-1)),Nt={key:1,class:"input-group"},Rt=i(()=>t("label",{for:"api_script"},"脚本",-1)),Ft={class:"input-group"},Gt=i(()=>t("label",{for:"api_db_id"},"数据库",-1)),Jt=["value"],zt={class:"input-group"},Ht=i(()=>t("label",{for:"api_sql"},"sql语句",-1)),Kt={class:"input-group"},Qt=i(()=>t("label",{for:"api_is_use_post_script"},"启用后置脚本",-1)),Wt={class:"switch"},Xt=i(()=>t("span",{class:"slider"},null,-1)),Yt={key:2,class:"input-group"},Zt=i(()=>t("label",{for:"api_post_script"},"后置脚本",-1)),te={class:"form-buttons",style:{"margin-bottom":"20px",width:"300px",display:"flex","justify-content":"space-between",margin:"0 auto"}},ee=i(()=>t("br",null,null,-1)),se=i(()=>t("br",null,null,-1)),oe={__name:"AddAPIDialog",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(a){const m=B(),_=D(a,"modelValue"),r=()=>{_.value=!1},f=h([]);(async()=>{const b=await F();f.value=b.data.data})();const d=h([]);(async()=>{const b=await G();d.value=b.data.data})();const V=h({}),e=h({});e.value={api_config_id:null,api_name:null,api_uri:null,api_method:null,api_db_id:null,api_project_id:null,api_sql:null,api_query:null,api_is_use_body:!1,api_script:null,api_is_use_script:!1,api_on:!1,api_post_script:null,api_is_use_post_script:!1,api_auth_id:null,api_is_use_auth:!1};const y=async()=>{V.value={api_name:e.value.api_name,api_uri:e.value.api_uri,api_method:e.value.api_method,api_db_id:e.value.api_db_id,api_project_id:m.params.id,api_sql:e.value.api_sql,api_query:P.encode(e.value.api_query),api_is_use_body:e.value.api_is_use_body?1:0,api_script:P.encode(JSON.stringify(e.value.api_script)),api_is_use_script:e.value.api_is_use_script?1:0,api_on:e.value.api_on?1:0,api_post_script:P.encode(JSON.stringify(e.value.api_post_script)),api_is_use_post_script:e.value.api_is_use_post_script?1:0,api_auth_id:e.value.api_auth_id,api_is_use_auth:e.value.api_is_use_auth?1:0},await J(V.value),r(),window.location.reload()};return(b,o)=>_.value?(n(),p("div",at,[t("div",lt,[t("div",_t,[ut,t("div",nt,[pt,l(t("input",{type:"text",id:"api_uri","onUpdate:modelValue":o[0]||(o[0]=s=>e.value.api_uri=s)},null,512),[[v,e.value.api_uri]])]),t("div",dt,[rt,l(t("select",{id:"api_method","onUpdate:modelValue":o[1]||(o[1]=s=>e.value.api_method=s)},bt,512),[[$,e.value.api_method]])]),t("div",ft,[yt,l(t("input",{type:"text",id:"api_method","onUpdate:modelValue":o[2]||(o[2]=s=>e.value.api_name=s)},null,512),[[v,e.value.api_name]])]),t("div",gt,[wt,t("label",xt,[l(t("input",{type:"checkbox",id:"api_on","onUpdate:modelValue":o[3]||(o[3]=s=>e.value.api_on=s)},null,512),[[g,e.value.api_on]]),Vt])]),t("div",kt,[Ut,t("label",jt,[l(t("input",{type:"checkbox",id:"api_is_use_auth","onUpdate:modelValue":o[4]||(o[4]=s=>e.value.api_is_use_auth=s)},null,512),[[g,e.value.api_is_use_auth]]),$t])]),e.value.api_is_use_auth?(n(),p("div",Pt,[Dt,l(t("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.value.api_auth_id=s)},[(n(!0),p(k,null,I(d.value,s=>(n(),p("option",{value:s.authentication_id},U(s.authentication_name),9,It))),256))],512),[[$,e.value.api_auth_id]])])):x("",!0),t("div",St,[qt,l(t("textarea",{id:"api_query","onUpdate:modelValue":o[6]||(o[6]=s=>e.value.api_query=s),rows:"4"},null,512),[[v,e.value.api_query]])]),t("div",Ct,[Et,t("label",Lt,[l(t("input",{type:"checkbox",id:"api_is_use_body","onUpdate:modelValue":o[7]||(o[7]=s=>e.value.api_is_use_body=s)},null,512),[[g,e.value.api_is_use_body]]),Tt])]),t("div",At,[Mt,t("label",Bt,[l(t("input",{type:"checkbox",id:"api_is_use_script","onUpdate:modelValue":o[8]||(o[8]=s=>e.value.api_is_use_script=s)},null,512),[[g,e.value.api_is_use_script]]),Ot])]),e.value.api_is_use_script?(n(),p("div",Nt,[Rt,l(t("textarea",{id:"api_script","onUpdate:modelValue":o[9]||(o[9]=s=>e.value.api_script=s),rows:"4"},null,512),[[v,e.value.api_script]])])):x("",!0),t("div",Ft,[Gt,l(t("select",{"onUpdate:modelValue":o[10]||(o[10]=s=>e.value.api_db_id=s)},[(n(!0),p(k,null,I(f.value,s=>(n(),p("option",{value:s.db_id},U(`${s.db_name}@${s.db_host}`),9,Jt))),256))],512),[[$,e.value.api_db_id]])]),t("div",zt,[Ht,l(t("textarea",{id:"api_sql","onUpdate:modelValue":o[11]||(o[11]=s=>e.value.api_sql=s),rows:"4"},null,512),[[v,e.value.api_sql]])]),t("div",Kt,[Qt,t("label",Wt,[l(t("input",{type:"checkbox",id:"api_is_use_post_script","onUpdate:modelValue":o[12]||(o[12]=s=>e.value.api_is_use_post_script=s)},null,512),[[g,e.value.api_is_use_post_script]]),Xt])]),e.value.api_is_use_post_script?(n(),p("div",Yt,[Zt,l(t("textarea",{id:"api_post_script","onUpdate:modelValue":o[13]||(o[13]=s=>e.value.api_post_script=s),rows:"4"},null,512),[[v,e.value.api_post_script]])])):x("",!0),t("div",te,[t("button",{type:"submit",class:"submit-button",onClick:y}," Submit "),t("button",{type:"submit",class:"submit-button",onClick:o[14]||(o[14]=s=>_.value=!1)}," Cancel ")]),ee,se])])])):x("",!0)}},ie=S(oe,[["__scopeId","data-v-2d8b6833"]]),O=a=>(q("data-v-96ef6ac2"),a=a(),C(),a),ae={class:"container"},le={class:"sidebar"},_e={style:{display:"flex","justify-content":"space-between"}},ue=O(()=>t("br",null,null,-1)),ne=O(()=>t("div",null,"接口列表",-1)),pe={class:"main"},de={__name:"ProjectLayOut",setup(a){const m=B(),{id:_}=m.params,r=h([]);(async()=>{const o=await z(_);r.value=o.data.data.records})();const j=o=>{switch(o){case"GET":return"green";case"POST":return"orange";case"PUT":return"blue";case"DELETE":return"red";default:return"gray"}},d=h({}),c=h(!1),V=async()=>{const o=await Q(_);d.value=o.data.data},e=()=>{V(),c.value=!0},y=h(!1),b=()=>{y.value=!0};return(o,s)=>{const L=A("RouterLink"),N=A("RouterView");return n(),p(k,null,[w(it,{show:c.value,"onUpdate:show":s[0]||(s[0]=u=>c.value=u),form:d.value,"onUpdate:form":s[1]||(s[1]=u=>d.value=u)},null,8,["show","form"]),w(ie,{modelValue:y.value,"onUpdate:modelValue":s[2]||(s[2]=u=>y.value=u)},null,8,["modelValue"]),t("div",ae,[t("aside",le,[t("div",_e,[w(L,{to:"/home/project"},{default:T(()=>[H("<")]),_:1}),t("div",{onClick:e,style:{cursor:"pointer"}},"update")]),ue,t("div",{style:{display:"flex","justify-content":"space-between"}},[ne,t("div",{onClick:b,style:{cursor:"pointer"}},"add API")]),t("ul",null,[(n(!0),p(k,null,I(r.value,u=>(n(),p("li",{key:u.id,style:M({border:u.api_on==1?"1px solid green":"1px solid gray"})},[w(L,{to:`/project/${K(_)}/api/${u.api_config_id}`},{default:T(()=>[t("div",{style:M({backgroundColor:j(u.api_method),padding:"3px",borderRadius:"3px",height:"18px",lineHeight:"18px",color:"white",fontSize:"13px"})},U(u.api_method),5),t("div",null,U(u.api_name),1)]),_:2},1032,["to"])],4))),128))])]),t("main",pe,[w(N)])])],64)}}},ve=S(de,[["__scopeId","data-v-96ef6ac2"]]);export{ve as default};
